--- stomp.py	2009-03-17 22:40:32.000000000 -0400
+++ stomp-2.6.py	2009-03-17 22:47:23.000000000 -0400
@@ -59,8 +59,8 @@
     
 """
 
+import hashlib
 import math
-import md5
 import random
 import re
 import socket
@@ -93,10 +93,11 @@
         # if we can't get a network address, just imagine one
         a = random.random() * 100000000000000000L
     data = str(t) + ' ' + str(r) + ' ' + str(a) + ' ' + str(args)
-    data = md5.md5(data).hexdigest()
-  
+    md5 = hashlib.md5()
+    md5.update(data)
+    data = md5.hexdigest()
     return data
-
+    
 
 class DevNullLogger(object):
     """
